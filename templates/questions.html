<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" type="image/x-icon" href="{{url_for('static',filename='favicon.ico')}}">
  <link rel="icon" href="{{url_for('static', filename='logo-1_144x144.png')}}" type="image/png">
  <link rel="icon" href="{{url_for('static', filename='logo-1_192x192.png')}}" type="image/png">
  <link rel="icon" href="{{url_for('static', filename='logo-1_512x512.png')}}" type="image/png">
  <link rel="apple-touch-icon" href="{{url_for('static', filename='logo-1_144x144.png')}}" type="image/png">
  <link rel="apple-touch-icon" href="{{url_for('static', filename='logo-1_192x192.png')}}" type="image/png">
  <link rel="apple-touch-icon" href="{{url_for('static', filename='logo-1_512x512.png')}}" type="image/png">
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register("/sw.js").then(function(registration) {
          console.log('ServiceWorker registration successful with scope: ', registration.scope);
        }, function(err) {
          console.log('ServiceWorker registration failed: ', err);
        });
      });
    }
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carousel Quiz</title>
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <style>
    .carousel {
      height: 100vh;
    }
    .carousel-inner {
      height: 100%;
    }
    .carousel-item {
      height: 100%;
    }
    .question-container {
      width: 80%;
      height: 100%;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    h2 {
      margin-bottom: 30px;
    }
    .options-container {
      width: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    button[data-next-slide] {
      width: 80%;
      height: 60px;
      margin: 10px;
      font-size: 1.25rem;
    }
  </style>
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" href="{{url_for('static', filename='logo-1_144x144.png')}}" type="image/png">
  <link rel="icon" href="{{url_for('static', filename='logo-1_192x192.png')}}" type="image/png">
  <link rel="icon" href="{{url_for('static', filename='logo-1_512x512.png')}}" type="image/png">
  <link rel="apple-touch-icon" href="{{url_for('static', filename='logo-1_144x144.png')}}" type="image/png">
  <link rel="apple-touch-icon" href="{{url_for('static', filename='logo-1_192x192.png')}}" type="image/png">
  <link rel="apple-touch-icon" href="{{url_for('static', filename='logo-1_512x512.png')}}" type="image/png">
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register("/sw.js").then(function(registration) {
          console.log('ServiceWorker registration successful with scope: ', registration.scope);
        }, function(err) {
          console.log('ServiceWorker registration failed: ', err);
        });
      });
    }
  </script>
</head>
<body>
    <input type="hidden" id="answers-input" name="answers">
    <div id="carouselExampleControls" class="carousel slide" data-ride="carousel" data-interval="false">
      <div class="carousel-inner">
        <!-- Question 1 -->
        <div class="carousel-item active">
          <div class="container h-100 d-flex justify-content-center align-items-center">
            <div class="question-container text-center">
              <h2>How often do you recycle?</h2>
              <div class="options-container">
                <button class="btn btn-primary" data-next-slide>Always</button>
                <button class="btn btn-primary" data-next-slide>Often</button>
                <button class="btn btn-primary" data-next-slide>Sometimes</button>
                <button class="btn btn-primary" data-next-slide>Never</button>
              </div>
            </div>
          </div>
        </div>
        <!-- Additional questions go here -->
        <div class="carousel-item">
          <div class="container h-100 d-flex justify-content-center align-items-center">
            <div class="question-container text-center">
              <h2>How often do you use public transportation</h2>
              <div class="options-container">
                <button class="btn btn-primary" data-next-slide>Daily</button>
                <button class="btn btn-primary" data-next-slide>Several Times a Week</button>
                <button class="btn btn-primary" data-next-slide>Occassionally</button>
                <button class="btn btn-primary" data-next-slide>Rarely</button>
              </div>
            </div>
          </div>
        </div>
        <div class="carousel-item">
          <div class="container h-100 d-flex justify-content-center align-items-center">
            <div class="question-container text-center">
              <h2>What type of vehicle do you drive?</h2>
              <div class="options-container">
                <button class="btn btn-primary" data-next-slide>Electric Vehicle (EV)</button>
                <button class="btn btn-primary" data-next-slide>Hybrid Vehicle</button>
                <button class="btn btn-primary" data-next-slide>Gasoline Vehicle</button>
                <button class="btn btn-primary" data-next-slide>Diesel Vehicle</button>
              </div>
            </div>
          </div>
        </div>
        <div class="carousel-item">
          <div class="container h-100 d-flex justify-content-center align-items-center">
            <div class="question-container text-center">
              <h2>What is your approach to reducing plastic usage?</h2>
              <div class="options-container">
                <button class="btn btn-primary" data-next-slide>I use reusable bags, bottles, and containers exclusively</button>
                <button class="btn btn-primary" data-next-slide>I use some reusable items but still use single-use plastics occasionally</button>
                <button class="btn btn-primary" data-next-slide>I try to minimize plastic usage but often use single-use plastics</button>
                <button class="btn btn-primary" data-next-slide>I do not make a conscious effort to reduce plastic usage</button>
              </div>
            </div>
          </div>
        </div>
        <div class="carousel-item">
          <div class="container h-100 d-flex justify-content-center align-items-center">
            <div class="question-container text-center">
              <h2>How do you handle food waste?</h2>
              <div class="options-container">
                <button class="btn btn-primary" data-next-slide>I compost food scraps and try to minimize food waste</button>
                <button class="btn btn-primary" data-next-slide>I try to use leftovers but do not compost</button>
                <button class="btn btn-primary" data-next-slide>I sometimes throw away uneaten food</button>
                <button class="btn btn-primary" data-next-slide>I do not actively manage food waste</button>
              </div>
            </div>
          </div>
        </div>
        <!-- Question 10 -->
        <div class="carousel-item">
          <div class="container h-100 d-flex justify-content-center align-items-center">
            <div class="question-container text-center">
              <h2>What is your typical approach to reducing energy consumption at home?</h2>
              <div class="options-container">
                <button class="btn btn-primary" data-next-slide>Use renewable energy sources (solar, wind)</button>
                <button class="btn btn-primary" data-next-slide>Turn off lights and unplug devices when not in use</button>
                <button class="btn btn-primary" data-next-slide>Use energy-efficient lighting and appliances</button>
                <button class="btn btn-primary" data-next-slide>No specific approach</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  <script>
    // Create an array to store the answers
var answers = [];

// Get all the buttons with data-next-slide attribute
var buttons = document.querySelectorAll('button[data-next-slide]');

// Add event listener to each button
buttons.forEach(function(button) {
  button.addEventListener('click', function() {
    // Get the answer text
    var answer = button.textContent;

    // Add the answer to the array
    answers.push(answer);

    // Get the current carousel item
    var currentItem = document.querySelector('.carousel-item.active');

    // Get the next carousel item
    var nextItem = currentItem.nextElementSibling;

    // If next item exists, move to it with animation
    if (nextItem) {
      $('.carousel').carousel('next');
    } else {
      // If no next item, log the answers
      console.log(answers);
      fetch('/rec',{
        method: "POST",
        headers: {
          'Content-Type':'application/json'
        },
        body: JSON.stringify(answers)
      })
      .then(res => {
        if (res.ok) {
          window.location.href=res.url;
        } else {
          console.log('Error',res.status,res.statusText);
        }
      })
      .catch(error => console.log('Error: ',error))
    }
  });
});
  </script>

  <!-- jQuery, Popper.js, and Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>